webpackJsonp([0],{"+OtK":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("BO1k"),i=a.n(n),l=a("q40t"),s={name:"BanCheDetail",components:{Map:a("3GDu").a},data:function(){return{bancheInfo:null,bancheDetail:null,tableData:[]}},created:function(){var t=this,e=this.$moment();this.$axios({method:"get",url:"static/data/banche.json"}).then(function(a){t.bancheInfo=a.data;var n=!0,l=!1,s=void 0;try{for(var r,c=i()(a.data);!(n=(r=c.next()).done);n=!0){var o=r.value;if(o.name===t.$route.query.name){t.bancheDetail=o;break}}}catch(t){l=!0,s=t}finally{try{!n&&c.return&&c.return()}finally{if(l)throw s}}var d=!0,p=!1,u=void 0;try{for(var v,m=i()(t.bancheDetail.banci);!(d=(v=m.next()).done);d=!0){var h=v.value,f=!0,b=!1,D=void 0;try{for(var _,y=i()(h.arri_time);!(f=(_=y.next()).done);f=!0){var T=_.value;if(e.isBefore(t.$moment(T,"YYYY-MM-DD HH:mm"))){var Y=T.split("-");Y=Y[Y.length-1].replace(" ","日"),t.tableData.push({start:t.bancheDetail.start,end:t.bancheDetail.end,depTime:Y})}}}catch(t){b=!0,D=t}finally{try{!f&&y.return&&y.return()}finally{if(b)throw D}}var M=!0,w=!1,H=void 0;try{for(var g,C=i()(h.back_time);!(M=(g=C.next()).done);M=!0){var S=g.value;if(e.isBefore(t.$moment(S,"YYYY-MM-DD HH:mm"))){var x=S.split("-");x=x[x.length-1].replace(" ","日"),t.tableData.push({start:t.bancheDetail.end,end:t.bancheDetail.start,depTime:x})}}}catch(t){w=!0,H=t}finally{try{!M&&C.return&&C.return()}finally{if(w)throw H}}}}catch(t){p=!0,u=t}finally{try{!d&&m.return&&m.return()}finally{if(p)throw u}}}).catch(function(t){console.log(t)})},methods:{saveEvent:function(t,e){var a=new Date(2020,9,parseInt(e.depTime.split("日")[0]));a.setHours(parseInt(e.depTime.split("日")[1].split(":")[0]),parseInt(e.depTime.split("日")[1].split(":")[1]),0,0);var n=l.b("YYYYmmddTHHMMSS",a);a.setMinutes(a.getMinutes()+45);var i=l.b("YYYYmmddTHHMMSS",a),s=e.start,r={startTime:n,endTime:i,title:e.depTime+"乘班车由"+e.start+"至"+e.end,loc:s,desc:this.bancheDetail.name+"可于"+e.depTime+"乘坐班车从"+e.start+"出发至"+e.end+"，预计到达时间"+i+"，耗时45分钟。"};l.a("点我导入系统日历.ics",l.c([r]))},saveAllEvent:function(){console.log("save all");for(var t=[],e=0;e<this.tableData.length;e++){var a=this.tableData[e],n=new Date(2020,9,parseInt(a.depTime.split("日")[0]));n.setHours(parseInt(a.depTime.split("日")[1].split(":")[0]),parseInt(a.depTime.split("日")[1].split(":")[1]),0,0);var i=l.b("YYYYmmddTHHMMSS",n);n.setMinutes(n.getMinutes()+45);var s=l.b("YYYYmmddTHHMMSS",n),r=a.start,c={startTime:i,endTime:s,title:a.depTime+"乘班车由"+a.start+"至"+a.end,loc:r,desc:this.bancheDetail.name+"可于"+a.depTime+"乘坐班车从"+a.start+"出发至"+a.end+"，预计到达时间"+s+"，耗时45分钟。"};t.push(c)}l.a("点我导入系统日历.ics",l.c(t))}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"BanCheDetail"},[a("div",{staticClass:"sec"},[a("div",{staticClass:"sec-title"},[t._v(t._s(this.bancheDetail.name)+"每日运输计划")]),t._v(" "),a("p",[t._v(t._s(this.bancheDetail.plan))])]),t._v(" "),a("div",{staticClass:"sec"},[a("div",{staticClass:"sec-title"},[t._v("组织路线图")]),t._v(" "),a("div",{staticClass:"map-box"},[a("Map",{attrs:{width:"100%",height:"300px","route-name":"finish2xinhua",zoom:"10"}})],1)]),t._v(" "),a("div",{staticClass:"sec"},[a("div",{staticClass:"sec-title"},[t._v("\n        "+t._s(this.bancheDetail.name)+"班车时刻表\n        "),a("el-button",{attrs:{id:"save-all",type:"primary",icon:"el-icon-download",size:"mini"},on:{click:t.saveAllEvent}},[t._v("全部导入系统日历")])],1),t._v(" "),a("el-table",{staticClass:"data-table",staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[a("el-table-column",{attrs:{prop:"depTime",label:"发车时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(e.row.depTime))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"start",label:"起点",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"end",label:"终点",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"end",label:"导入",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-date",size:"mini",circle:"",plain:""},on:{click:function(a){return t.saveEvent(e.$index,e.row)}}})]}}])})],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(s,r,!1,function(t){a("T1wu")},null,null);e.default=c.exports},T1wu:function(t,e){}});
//# sourceMappingURL=0.2cb2edf2537038b38673.js.map